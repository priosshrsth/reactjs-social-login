var e,t=require("react"),o=(e=t)&&"object"==typeof e&&"default"in e?e.default:e,n=require("crypto-js");function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var c=window,i=t.forwardRef(function(e,n){var a=e.state,i=void 0===a?"":a,s=e.client_id,u=e.className,l=e.redirect_uri,d=e.scope,m=void 0===d?"profile":d,h=e.scope_data,f=void 0===h?{profile:{essential:!0}}:h,p=e.response_type,g=void 0===p?"token":p,v=e.children,_=e.onReject,w=e.onResolve,b=e.onLogoutSuccess,k=e.onLoginStart,y=t.useState(!1),S=y[0],C=y[1],L=t.useState(!1),P=L[0],E=L[1],I=t.useState(!1),j=I[0],R=I[1];t.useEffect(function(){!P&&A()},[P]);var z=t.useCallback(function(){return!!document.getElementById("amazon-login")},[]),x=t.useCallback(function(e,t,o,n,r){void 0===t&&(t="script");var a=e.createElement(t);a.id=o,a.src=n,a.async=!0,a.defer=!0;var c=document.getElementsByTagName("script")[0];c&&c.parentNode&&c.parentNode.insertBefore(a,c),a.onload=r},[]),T=t.useCallback(function(e){try{return fetch("https://api.amazon.com/user/profile",{headers:{Authorization:"Bearer "+e.access_token}}).then(function(e){return e.json()}).then(function(t){w({provider:"amazon",data:r({},t,e)})}).catch(function(e){_(e)}).finally(function(){R(!1),C(!0)}),Promise.resolve()}catch(e){return Promise.reject(e)}},[_,w]),N=t.useCallback(function(e){return T(e)},[T]),U=t.useCallback(function(e){R(!1),_(e)},[_]),A=t.useCallback(function(){z()?E(!0):x(document,"script","amazon-login","https://assets.loginwithamazon.com/sdk/na/login1.js",function(){c.amazon.Login.setClientId(s),E(!0)})},[z,s,x]),H=t.useCallback(function(){!j&&P&&(R(!0),c.amazon?(k&&k(),c.amazon.Login.authorize({scope:m,scope_data:f,response_type:g,redirect_uri:l,state:i},function(e){e.error?U(e.error):N(e)})):(R(!1),A(),_("Google SDK isn't loaded!")))},[j,P,A,_,k,m,f,g,l,i,U,N]);return t.useImperativeHandle(n,function(){return{onLogout:function(){S?(C(!1),c.amazon.Login.logout(),b&&b()):console.log("You must login before logout.")}}}),o.createElement("div",{className:u,onClick:H},v)}),s=t.memo(i),u=window,l=t.forwardRef(function(e,n){var a=e.appId,c=e.scope,i=void 0===c?"email,public_profile":c,s=e.state,l=void 0===s||s,d=e.xfbml,m=void 0===d||d,h=e.cookie,f=void 0===h||h,p=e.version,g=void 0===p?"v2.7":p,v=e.language,_=void 0===v?"en_EN":v,w=e.auth_type,b=void 0===w?"":w,k=e.className,y=e.onLoginStart,S=e.onLogoutSuccess,C=e.onReject,L=e.onResolve,P=e.redirect_uri,E=e.fieldsProfile,I=void 0===E?"id,first_name,last_name,middle_name,name,name_format,picture,short_name,email,gender":E,j=e.response_type,R=void 0===j?"code":j,z=e.return_scopes,x=void 0===z||z,T=e.children,N=t.useState(!1),U=N[0],A=N[1],H=t.useState(!1),B=H[0],O=H[1],F=t.useState(!1),G=F[0],M=F[1];t.useEffect(function(){!B&&J()},[B]);var Y=t.useCallback(function(e,t){var o=e.createElement("script");o.id="facebook-jssdk",o.src="https://connect.facebook.net/en_EN/sdk.js";var n=e.getElementsByTagName("script")[0];n&&n.parentNode&&n.parentNode.insertBefore(o,n),t()},[]),K=t.useCallback(function(){return!!document.getElementById("facebook-jssdk")},[]),D=t.useCallback(function(e,t){var o=window;o.fbAsyncInit=function(){o.FB&&o.FB.init(r({},e)),O(!0);var n=t.getElementById("fb-root");n||((n=t.createElement("div")).id="fb-root",t.body.appendChild(n))}},[]),q=t.useCallback(function(e){u.FB.api("/me",{locale:_,fields:I},function(t){A(!0),M(!1),L({provider:"facebook",data:r({},e,t)})})},[I,_,L]),V=t.useCallback(function(e){e.authResponse?q(e.authResponse):C(e)},[q,C]),J=t.useCallback(function(){K()?O(!0):Y(document,function(){D({appId:a,xfbml:m,version:g,state:l,cookie:f,redirect_uri:P,response_type:R},document)})},[l,a,m,f,g,D,P,R,Y,K]),$=t.useCallback(function(){!G&&B&&(M(!0),u.FB?(y&&y(),u.FB.login(V,{scope:i,return_scopes:x,auth_type:b})):(M(!1),J(),C("Fb isn't loaded!")))},[G,B,J,C,y,V,i,x,b]);return t.useImperativeHandle(n,function(){return{onLogout:function(){U?(console.log("ðŸš€ ~ file: index.tsx ~ line 202 ~ useImperativeHandle ~ isLogged",U),A(!1),S&&S(),u.FB.logout()):console.log("You must login before logout.")}}}),o.createElement("div",{className:k,onClick:$},T)}),d=t.memo(l),m=window,h=t.forwardRef(function(e,n){var a=e.client_id,c=e.scope,i=void 0===c?"email profile":c,s=e.prompt,u=void 0===s?"select_account":s,l=e.ux_mode,d=e.className,h=void 0===d?"":d,f=e.login_hint,p=void 0===f?"":f,g=e.access_type,v=void 0===g?"online":g,_=e.onLogoutFailure,w=e.onLogoutSuccess,b=e.onLoginStart,k=e.onReject,y=e.onResolve,S=e.redirect_uri,C=void 0===S?"/":S,L=e.cookie_policy,P=void 0===L?"single_host_origin":L,E=e.hosted_domain,I=void 0===E?"":E,j=e.discoveryDocs,R=void 0===j?"":j,z=e.children,x=e.fetch_basic_profile,T=void 0===x||x,N=t.useState(!1),U=N[0],A=N[1],H=t.useState(!1),B=H[0],O=H[1],F=t.useState(!1),G=F[0],M=F[1],Y=t.useState(null),K=Y[0],D=Y[1],q=t.useState(""),V=q[0],J=q[1];t.useEffect(function(){!B&&X()},[B]);var $=t.useCallback(function(){return!!document.getElementById("google-login")},[]),Q=t.useCallback(function(e,t,o,n,r){void 0===t&&(t="script");var a=e.createElement(t);a.id=o,a.src=n,a.async=!0,a.defer=!0;var c=document.getElementsByTagName("script")[0];c&&c.parentNode&&c.parentNode.insertBefore(a,c),a.onload=r},[]),W=t.useCallback(function(e){A(!0),M(!1),J(null==e?void 0:e.access_token),y({provider:"google",data:e})},[y]),X=t.useCallback(function(){$()?O(!0):Q(document,"script","google-login","https://accounts.google.com/gsi/client",function(){var e=m.google.accounts.oauth2.initTokenClient(r({},{client_id:a,cookie_policy:P,login_hint:p,hosted_domain:I,fetch_basic_profile:T,discoveryDocs:R,ux_mode:l,redirect_uri:C,access_type:v,scope:i,immediate:!0,prompt:u},{callback:W}));D(e),O(!0)})},[$,Q,a,u,P,p,I,T,R,l,C,v,i,W]),Z=t.useCallback(function(){!G&&B&&(M(!0),m.google?(b&&b(),K&&K.requestAccessToken()):(M(!1),X(),k("Google SDK isn't loaded!")))},[K,G,B,X,b,k]);return t.useImperativeHandle(n,function(){return{onLogout:function(){U&&V?(A(!1),m.google.accounts.oauth2.revoke(V,function(e){e.error?(console.log(e.error),_&&_()):w&&w()})):console.log("You must login before logout.")}}}),o.createElement("div",{className:h,onClick:Z},z)}),f=t.memo(h),p=t.forwardRef(function(e,n){var c=e.state,i=void 0===c?"":c,s=e.scope,u=void 0===s?"repo,gist":s,l=e.client_id,d=e.client_secret,m=e.className,h=void 0===m?"":m,f=e.redirect_uri,p=e.allow_signup,g=void 0!==p&&p,v=e.children,_=e.onReject,w=e.onResolve,b=e.onLoginStart,k=e.onLogoutSuccess,y=t.useState(!1),S=y[0],C=y[1],L=t.useState(!1),P=L[0],E=L[1];t.useEffect(function(){var e=new URL(window.location.href),t=e.searchParams.get("code"),o=e.searchParams.get("state");null!=o&&o.includes("_github")&&t&&(localStorage.setItem("github",t),window.close())},[]);var I=t.useCallback(function(e){fetch("https://cors.bridged.cc/https://api.github.com//user",{method:"GET",headers:{Authorization:"token "+e.access_token,"x-cors-grida-api-key":"875c0462-6309-4ddf-9889-5227b1acc82c"}}).then(function(e){return e.json()}).then(function(t){C(!0),E(!1),w({provider:"github",data:r({},t,e)})}).catch(function(e){E(!1),_(e)})},[_,w]),j=t.useCallback(function(e){var t={code:e,state:i,redirect_uri:f,client_id:l,client_secret:d},o=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":"875c0462-6309-4ddf-9889-5227b1acc82c"});fetch("https://cors.bridged.cc/https://github.com/login/oauth/access_token",{method:"POST",headers:o,body:new URLSearchParams(t)}).then(function(e){return e.text()}).then(function(e){E(!1);for(var t,o={},n=function(e,t){var o;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(o=function(e,t){if(e){if("string"==typeof e)return a(e,void 0);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?a(e,void 0):void 0}}(e))){o&&(e=o);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(o=e[Symbol.iterator]()).next.bind(o)}(new URLSearchParams(e));!(t=n()).done;){var r=t.value;o[r[0]]=r[1]}o.access_token?I(o):_("no data")}).catch(function(e){E(!1),_(e)})},[l,d,I,_,f,i]),R=t.useCallback(function(e){var t=e.type,o=e.code,n=e.provider;try{return Promise.resolve("code"===t&&"github"===n&&o&&j(o))}catch(e){return Promise.reject(e)}},[j]),z=t.useCallback(function(){window.removeEventListener("storage",z,!1);var e=localStorage.getItem("github");e&&(E(!0),R({provider:"github",type:"code",code:e}),localStorage.removeItem("instagram"))},[R]),x=t.useCallback(function(){if(!P){b&&b(),window.addEventListener("storage",z,!1);var e=window.screen.width/2-225,t=window.screen.height/2-365;window.open("https://github.com/login/oauth/authorize?client_id="+l+"&scope="+u+"&state="+i+"_github&redirect_uri="+f+"&allow_signup="+g,"Github","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+t+", left="+e)}},[P,b,z,l,u,i,f,g]);return t.useImperativeHandle(n,function(){return{onLogout:function(){S?(C(!1),k&&k()):console.log("You must login before logout.")}}}),o.createElement("div",{className:h,onClick:x},v)}),g=t.memo(p),v=t.forwardRef(function(e,n){var a=e.state,c=void 0===a?"":a,i=e.client_id,s=e.client_secret,u=e.className,l=e.redirect_uri,d=e.scope,m=void 0===d?"user_profile,user_media":d,h=e.response_type,f=void 0===h?"code":h,p=e.children,g=e.onLogoutSuccess,v=e.onReject,_=e.onResolve,w=e.onLoginStart,b=t.useState(!1),k=b[0],y=b[1],S=t.useState(!1),C=S[0],L=S[1];t.useEffect(function(){var e=new URL(window.location.href),t=e.searchParams.get("code"),o=e.searchParams.get("state");null!=o&&o.includes("_instagram")&&t&&(localStorage.setItem("instagram",t),window.close())},[]);var P=t.useCallback(function(e){fetch("https://cors.bridged.cc/https://graph.instagram.com//me?fields=id,username,account_type,media_count&access_token="+e.access_token,{method:"GET",headers:{"x-cors-grida-api-key":"875c0462-6309-4ddf-9889-5227b1acc82c"}}).then(function(e){return e.json()}).then(function(t){y(!0),L(!1),_({provider:"instagram",data:r({},t,e)})}).catch(function(e){L(!1),v(e)})},[v,_]),E=t.useCallback(function(e){var t={grant_type:"authorization_code",code:e,redirect_uri:l,client_id:i,client_secret:s},o=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":"875c0462-6309-4ddf-9889-5227b1acc82c"});fetch("https://cors.bridged.cc/https://api.instagram.com/oauth/access_token",{method:"POST",headers:o,body:new URLSearchParams(t)}).then(function(e){return e.json()}).then(function(e){e.access_token?P(e):v("no data")}).catch(function(e){v(e)}).finally(function(){L(!1)})},[i,s,P,v,l]),I=t.useCallback(function(e){var t=e.type,o=e.code,n=e.provider;try{return Promise.resolve("code"===t&&"instagram"===n&&o&&E(o))}catch(e){return Promise.reject(e)}},[E]),j=t.useCallback(function(){window.removeEventListener("storage",j,!1);var e=localStorage.getItem("instagram");e&&(L(!0),I({provider:"instagram",type:"code",code:e}),localStorage.removeItem("instagram"))},[I]),R=t.useCallback(function(){if(!C){w&&w(),window.addEventListener("storage",j,!1);var e=window.screen.width/2-225,t=window.screen.height/2-365;window.open("https://api.instagram.com/oauth/authorize?response_type="+f+"&client_id="+i+"&scope="+m+"&state="+c+"_instagram&redirect_uri="+l,"Instagram","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+t+", left="+e)}},[C,w,j,f,i,m,c,l]);return t.useImperativeHandle(n,function(){return{onLogout:function(){k?(y(!1),g&&g()):console.log("You must login before logout.")}}}),o.createElement("div",{className:u,onClick:R},p)}),_=t.memo(v),w=t.forwardRef(function(e,n){var a=e.tenant,c=void 0===a?"common":a,i=e.state,s=void 0===i?"":i,u=e.client_id,l=e.className,d=e.redirect_uri,m=e.scope,h=void 0===m?"profile openid email":m,f=e.response_type,p=void 0===f?"code":f,g=e.response_mode,v=void 0===g?"query":g,_=e.children,w=e.code_challenge,b=void 0===w?"19cfc47c216dacba8ca23eeee817603e2ba34fe0976378662ba31688ed302fa9":w,k=e.code_challenge_method,y=void 0===k?"plain":k,S=e.prompt,C=void 0===S?"select_account":S,L=e.onLogoutSuccess,P=e.onLoginStart,E=e.onReject,I=e.onResolve,j=t.useState(!1),R=j[0],z=j[1],x=t.useState(!1),T=x[0],N=x[1];t.useEffect(function(){var e=new URL(window.location.href),t=e.searchParams.get("code"),o=e.searchParams.get("state");null!=o&&o.includes("_microsoft")&&t&&(localStorage.setItem("microsoft",t),window.close())},[]);var U=t.useCallback(function(e){fetch("https://graph.microsoft.com/v1.0/me",{method:"GET",headers:{Authorization:"Bearer "+e.access_token}}).then(function(e){return e.json()}).then(function(t){N(!1),z(!0),I({provider:"microsoft",data:r({},t,e)})}).catch(function(e){N(!1),E(e)})},[E,I]),A=t.useCallback(function(e){var t={code:e,scope:h,client_id:u,redirect_uri:d,code_verifier:b,grant_type:"authorization_code"},o=new Headers({"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"});fetch("https://login.microsoftonline.com/"+c+"/oauth2/v2.0/token",{method:"POST",headers:o,body:new URLSearchParams(t)}).then(function(e){return e.json()}).then(function(e){e.access_token?U(e):(N(!1),E("no data"))}).catch(function(e){N(!1),E(e)})},[h,c,E,u,U,d,b]),H=t.useCallback(function(e){var t=e.type,o=e.code,n=e.provider;try{return Promise.resolve("code"===t&&"microsoft"===n&&o&&A(o))}catch(e){return Promise.reject(e)}},[A]),B=t.useCallback(function(){window.removeEventListener("storage",B,!1);var e=localStorage.getItem("microsoft");e&&(N(!0),H({provider:"microsoft",type:"code",code:e}),localStorage.removeItem("microsoft"))},[H]),O=t.useCallback(function(){if(!T){P&&P(),window.addEventListener("storage",B,!1);var e=window.screen.width/2-225,t=window.screen.height/2-365;window.open("https://login.microsoftonline.com/"+c+"/oauth2/v2.0/authorize?client_id="+u+"\n        &response_type="+p+"\n        &redirect_uri="+d+"\n        &response_mode="+v+"\n        &scope="+h+"\n        &state="+s+"_microsoft\n        &prompt="+C+"\n        &code_challenge="+b+"\n        &code_challenge_method="+y,"Microsoft","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+t+", left="+e)}},[T,P,B,c,u,p,d,v,h,s,C,b,y]);return t.useImperativeHandle(n,function(){return{onLogout:function(){R?(z(!1),L&&L()):console.log("You must login before logout.")}}}),o.createElement("div",{className:l,onClick:O},_)}),b=t.memo(w),k=t.forwardRef(function(e,n){var a=e.state,c=void 0===a?"":a,i=e.scope,s=void 0===i?"r_liteprofile":i,u=e.client_id,l=e.client_secret,d=e.className,m=void 0===d?"":d,h=e.redirect_uri,f=e.response_type,p=void 0===f?"code":f,g=e.children,v=e.onLoginStart,_=e.onLogoutSuccess,w=e.onReject,b=e.onResolve,k=t.useState(!1),y=k[0],S=k[1],C=t.useState(!1),L=C[0],P=C[1];t.useEffect(function(){var e=new URL(window.location.href),t=e.searchParams.get("code"),o=e.searchParams.get("state");null!=o&&o.includes("_linkedin")&&t&&(localStorage.setItem("linkedin",t),window.close())},[]);var E=t.useCallback(function(e){fetch("https://api.allorigins.win/get?url="+encodeURIComponent("https://api.linkedin.com/v2/me?oauth2_access_token="+e.access_token+"&projection=(id,profilePicture(displayImage~digitalmediaAsset:playableStreams),localizedLastName, firstName,lastName,localizedFirstName)"),{method:"GET"}).then(function(e){return e.json()}).then(function(t){var o=r({},e);if(t.contents){var n=JSON.parse(t.contents);"object"==typeof e&&Object.entries(n).map(function(e){o[e[0]]=e[1]})}S(!0),P(!1),b({provider:"linkedin",data:o})}).catch(function(e){P(!1),w(e)})},[w,b]),I=t.useCallback(function(e){var t={code:e,grant_type:"authorization_code",redirect_uri:h,client_id:u,client_secret:l},o=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":"875c0462-6309-4ddf-9889-5227b1acc82c"});fetch("https://cors.bridged.cc/https://www.linkedin.com/oauth/v2/accessToken",{method:"POST",headers:o,body:new URLSearchParams(t)}).then(function(e){return e.json()}).then(function(e){E(e)}).catch(function(e){P(!1),w(e)})},[u,l,E,w,h]),j=t.useCallback(function(e){var t=e.type,o=e.code,n=e.provider;try{return Promise.resolve("code"===t&&"linkedin"===n&&o&&I(o))}catch(e){return Promise.reject(e)}},[I]),R=t.useCallback(function(){window.removeEventListener("storage",R,!1);var e=localStorage.getItem("linkedin");e&&(P(!0),j({provider:"linkedin",type:"code",code:e}),localStorage.removeItem("linkedin"))},[j]),z=t.useCallback(function(){if(!L){v&&v(),window.addEventListener("storage",R,!1);var e=window.screen.width/2-225,t=window.screen.height/2-365;window.open("https://www.linkedin.com/oauth/v2/authorization?response_type="+p+"&client_id="+u+"&scope="+s+"&state="+c+"_linkedin&redirect_uri="+h,"Linkedin","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+t+", left="+e)}},[L,v,R,p,u,s,c,h]);return t.useImperativeHandle(n,function(){return{onLogout:function(){y?(S(!1),_&&_()):console.log("You must login before logout.")}}}),o.createElement("div",{className:m,onClick:z},g)}),y=t.memo(k),S=t.forwardRef(function(e,n){var a=e.state,c=void 0===a?"":a,i=e.scope,s=void 0===i?"":i,u=e.client_id,l=e.client_secret,d=e.className,m=void 0===d?"":d,h=e.redirect_uri,f=e.children,p=e.onLoginStart,g=e.onLogoutSuccess,v=e.onReject,_=e.onResolve,w=t.useState(!1),b=w[0],k=w[1],y=t.useState(!1),S=y[0],C=y[1];t.useEffect(function(){var e=new URL(window.location.href),t=e.searchParams.get("code"),o=e.searchParams.get("state");null!=o&&o.includes("_pinterest")&&t&&(localStorage.setItem("pinterest",t),window.close())},[]);var L=t.useCallback(function(e){fetch("https://cors.bridged.cc/https://api.pinterest.com/v5/user_account",{method:"GET",headers:{Authorization:"Bearer "+e.access_token,"x-cors-grida-api-key":"875c0462-6309-4ddf-9889-5227b1acc82c"}}).then(function(e){return e.json()}).then(function(t){k(!0),C(!1),_({provider:"pinterest",data:r({},e,t)})}).catch(function(e){return v(e)})},[v,_]),P=t.useCallback(function(e){try{var t={code:e,redirect_uri:h,grant_type:"authorization_code"},o=[];for(var n in t){var r=encodeURIComponent(n),a=encodeURIComponent(t[n]);o.push(r+"="+a)}return o=o.join("&"),Promise.resolve(fetch("https://cors.bridged.cc/https://api.pinterest.com/v5/oauth/token",{method:"POST",headers:{Authorization:"Basic "+btoa(u+":"+l),"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":"875c0462-6309-4ddf-9889-5227b1acc82c"},body:o}).then(function(e){return e.json()}).catch(function(e){return v(e)})).then(function(e){L(e)})}catch(e){return Promise.reject(e)}},[u,l,L,v,h]),E=t.useCallback(function(e){var t=e.type,o=e.code,n=e.provider;try{return Promise.resolve("code"===t&&"pinterest"===n&&o&&P(o))}catch(e){return Promise.reject(e)}},[P]),I=t.useCallback(function(){window.removeEventListener("storage",I,!1);var e=localStorage.getItem("pinterest");e&&(C(!0),E({provider:"pinterest",type:"code",code:e}),localStorage.removeItem("pinterest"))},[E]),j=t.useCallback(function(){if(!S){p&&p(),window.addEventListener("storage",I,!1);var e=window.screen.width/2-225,t=window.screen.height/2-365;window.open("https://www.pinterest.com/oauth/?client_id="+u+"&scope="+s+"&state="+c+"_pinterest&redirect_uri="+h+"&response_type=code&scope=boards:read,pins:read,user_accounts:read","Pinterest","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+t+", left="+e)}},[S,p,I,u,s,c,h]);return t.useImperativeHandle(n,function(){return{onLogout:function(){b?(k(!1),g&&g()):console.log("You must login before logout.")}}}),o.createElement("div",{className:m,onClick:j},f)}),C=t.memo(S),L=function(e,t,o,a,c){void 0===c&&(c="");var i=Object.keys(e).sort().reduce(function(t,o){return t+"&"+o+"="+e[o]},"").substr(1),s=t.toUpperCase()+"&"+encodeURIComponent(o)+"&"+encodeURIComponent(i),u=encodeURIComponent(a)+"&"+encodeURIComponent(c),l=n.enc.Base64.stringify(n.HmacSHA1(s,u)),d=r({},e,{oauth_signature:encodeURIComponent(l)});return Object.keys(d).sort().reduce(function(e,t){return e+","+t+'="'+d[t]+'"'},"").substr(1)},P=function(e){return e.split("&").reduce(function(e,t){var o,n=t.split("=");return r({},e,((o={})[n[0]]=n[1],o))},{})},E="https://api.twitter.com",I=t.forwardRef(function(e,n){var a=e.client_id,c=e.client_secret,i=e.className,s=void 0===i?"":i,u=e.redirect_uri,l=e.children,d=e.onLoginStart,m=e.onLogoutSuccess,h=e.onReject,f=e.onResolve,p=t.useState(!1),g=p[0],v=p[1],_=t.useState(!1),w=_[0],b=_[1];t.useEffect(function(){var e=new URL(window.location.href),t=e.searchParams.get("oauth_verifier"),o=e.searchParams.get("oauth_token");o&&t&&(localStorage.setItem("twitter",t+"&"+o),window.close())},[]);var k=t.useCallback(function(e){var t,o,n,i,s,u,l,d=(o=(t={method:"GET",apiUrl:E+"/1.1/account/verify_credentials.json",consumerKey:a,consumerSecret:c,oauthToken:e.oauth_token,oauthTokenSecret:e.oauth_token_secret}).consumerSecret,n=t.oauthToken,i=t.oauthTokenSecret,s=t.method,u=t.apiUrl,l={oauth_consumer_key:t.consumerKey,oauth_nonce:Math.random().toString(36).replace(/[^a-z]/,"").substr(2),oauth_signature_method:"HMAC-SHA1",oauth_timestamp:(Date.now()/1e3).toFixed(),oauth_token:n,oauth_version:"1.0"},L(l,s,u,o,i));fetch("https://cors.bridged.cc/https://api.twitter.com/1.1/account/verify_credentials.json",{method:"GET",headers:{Authorization:"OAuth "+d,"x-cors-grida-api-key":"875c0462-6309-4ddf-9889-5227b1acc82c"}}).then(function(e){return e.json()}).then(function(t){v(!0),f({provider:"twitter",data:r({},e,t)}),b(!1)}).catch(function(e){return h(e)})},[a,c,h,f]),y=t.useCallback(function(e){try{var t=e.split("&"),o=(r=(n={method:"POST",apiUrl:E+"/oauth/access_token",consumerKey:a,consumerSecret:c,oauthToken:t[1],oauthVerifier:t[0]}).consumerSecret,s=n.method,u=n.apiUrl,l={oauth_consumer_key:n.consumerKey,oauth_version:"1.0",oauth_signature_method:"HMAC-SHA1",oauth_token:n.oauthToken,oauth_verifier:i=n.oauthVerifier,oauth_timestamp:(Date.now()/1e3).toFixed(),oauth_nonce:Math.random().toString(36).replace(/[^a-z]/,"").substr(2)},L(l,s,u,r,i));return Promise.resolve(fetch("https://cors.bridged.cc/https://api.twitter.com/oauth/access_token",{method:"POST",headers:{Authorization:"OAuth "+o,"x-cors-grida-api-key":"875c0462-6309-4ddf-9889-5227b1acc82c"}}).then(function(e){return e.text()}).then(function(e){return P(e)}).catch(function(e){return h(e)})).then(function(e){e&&k(e)})}catch(e){return Promise.reject(e)}var n,r,i,s,u,l},[a,c,k,h]),S=t.useCallback(function(e){var t=e.type,o=e.code,n=e.provider;try{return Promise.resolve("code"===t&&"twitter"===n&&o&&y(o))}catch(e){return Promise.reject(e)}},[y]),C=t.useCallback(function(){window.removeEventListener("storage",C,!1);var e=localStorage.getItem("twitter");e&&(b(!0),S({provider:"twitter",type:"code",code:e}),localStorage.removeItem("twitter"))},[S]),I=t.useCallback(function(){try{var e=function(){if(!w){d&&d();var e=function(e){var t=e.method,o=e.apiUrl,n=e.consumerSecret,r={oauth_consumer_key:e.consumerKey,oauth_version:"1.0",oauth_signature_method:"HMAC-SHA1",oauth_callback:e.callbackUrl,oauth_timestamp:(Date.now()/1e3).toFixed(),oauth_nonce:Math.random().toString(36).replace(/[^a-z]/,"").substr(2)};return L(r,t,o,n)}({method:"POST",apiUrl:E+"/oauth/request_token",callbackUrl:u,consumerKey:a,consumerSecret:c});return Promise.resolve(fetch("https://cors.bridged.cc/https://api.twitter.com/oauth/request_token",{method:"POST",headers:{Authorization:"OAuth "+e,"x-cors-grida-api-key":"875c0462-6309-4ddf-9889-5227b1acc82c"}}).then(function(e){return e.text()}).catch(function(e){return h(e)})).then(function(e){if(e){var t=P(e);window.addEventListener("storage",C,!1);var o=window.screen.width/2-225,n=window.screen.height/2-365;window.open(E+"/oauth/authenticate?oauth_token="+t.oauth_token,"twitter","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+n+", left="+o)}})}}();return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},[w,d,u,a,c,h,C]);return t.useImperativeHandle(n,function(){return{onLogout:function(){g?(v(!1),m&&m()):console.log("You must login before logout.")}}}),o.createElement("div",{className:s,onClick:I},l)}),j=t.memo(I);exports.LoginSocialAmazon=s,exports.LoginSocialFacebook=d,exports.LoginSocialGithub=g,exports.LoginSocialGoogle=f,exports.LoginSocialInstagram=_,exports.LoginSocialLinkedin=y,exports.LoginSocialMicrosoft=b,exports.LoginSocialPinterest=C,exports.LoginSocialTwitter=j;
